<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patrol Robot Command Center</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

    <style>
        body {
            font-family: 'Share Tech Mono', monospace;
            background-color: #0f172a;
            color: #00ff41;
            user-select: none;
            -webkit-user-select: none;
            overscroll-behavior: none;
        }

        /* Glass Panels */
        .glass-panel {
            background: rgba(30, 41, 59, 0.75);
            border: 1px solid #00ff41;
            backdrop-filter: blur(6px);
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.3);
        }

        /* Buttons */
        .btn-control {
            transition: all 0.15s;
            border: 2px solid #00ff41;
            cursor: pointer;
            touch-action: none;
            -webkit-tap-highlight-color: transparent;
            position: relative;
            z-index: 10;
        }

        .btn-control i {
            pointer-events: none;
        }

        .btn-control:active,
        .btn-control.active-key {
            transform: scale(0.9);
            background-color: #00ff41;
            color: black;
            box-shadow: 0 0 20px #00ff41;
        }

        /* Hover Effects for All Buttons */
        .btn-control:hover {
            background-color: #064e2d;
        }

        /* Alerts */
        .alert-active {
            animation: blink 1s infinite;
            background-color: rgba(220, 38, 38, 0.3);
            border-color: #ef4444;
            color: #ef4444;
        }

        @keyframes blink {
            50% {
                opacity: 0.5;
            }
        }

        /* Map Fixes */
        .leaflet-pane {
            z-index: 0 !important;
        }

        .leaflet-top,
        .leaflet-bottom {
            z-index: 10 !important;
        }
    </style>
</head>

<body class="min-h-screen p-4 flex flex-col gap-4">

    <!-- Header -->
    <header
        class="flex flex-col md:flex-row justify-between items-center border-b border-green-500 pb-2 gap-2 md:gap-0">
        <div
            class="w-full flex flex-col md:flex-row md:items-center justify-center md:justify-start gap-1 md:gap-2 text-center md:text-left">
            <h1
                class="text-lg sm:text-2xl md:text-3xl font-bold tracking-wide flex items-center justify-center md:justify-start gap-2">
                <i class="fas fa-robot"></i> NIGHT PATROLLING COMMAND CENTER
            </h1>
            <div class="text-[9px] sm:text-xs md:text-sm text-green-500 md:ml-2">
                TACTICAL SURVEILLANCE UNIT
            </div>
        </div>

        <div class="flex flex-wrap justify-center md:justify-end gap-2 w-full md:w-auto mt-2 md:mt-0">
            <div id="connectionStatus"
                class="text-xs sm:text-sm bg-red-900 px-3 py-1 rounded border border-red-500 animate-pulse whitespace-nowrap">
                UPLINK: OFFLINE</div>
            <div id="robotStatus"
                class="text-xs sm:text-sm bg-red-900 px-3 py-1 rounded border border-red-500 animate-pulse whitespace-nowrap">
                ROBOT: OFFLINE</div>
        </div>
    </header>

    <!-- Main Grid -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 flex-grow">

        <!-- Map -->
        <div class="glass-panel p-2 rounded-lg col-span-1 lg:col-span-2 flex flex-col min-h-[350px]">
            <div class="flex justify-between items-center mb-2 px-2">
                <h2 class="bg-black px-2 text-sm border border-green-500 rounded">LIVE GEOLOCATION</h2>
                <div class="text-xs text-gray-400" id="gps-status"><i class="fas fa-satellite"></i> WAITING FOR
                    SIGNAL...</div>
            </div>
        <!--    <div id="map" class="w-full flex-grow bg-slate-800 rounded-lg opacity-90 border border-green-900/50"></div> -->
            <div class="w-full flex-grow bg-slate-900 rounded-lg border border-green-900/50
            flex items-center justify-center text-xs sm:text-sm text-gray-400 tracking-widest">
    <i class="fas fa-map-marked-alt mr-2 text-green-500"></i>
    MAP TEMPORARILY DISABLED
</div>

        </div>

        <!-- Controls -->
        <div class="flex flex-col gap-4">

            <!-- Sensor Telemetry -->
            <div class="glass-panel p-3 rounded-lg">
                <h2 class="text-lg border-b border-gray-600 pb-1 mb-2 text-center">SENSOR ARRAY</h2>
                <div class="grid grid-cols-2 gap-2">
                    <div class="bg-slate-900/80 p-2 rounded border border-green-900 flex flex-col items-center">
                        <div class="text-[10px] text-gray-400">DISTANCE (CM)</div>
                        <div class="text-2xl font-bold" id="val-dist">---</div>
                    </div>
                    <div class="bg-slate-900/80 p-2 rounded border border-green-900 flex flex-col items-center">
                        <div class="text-[10px] text-gray-400">NOISE (RAW)</div>
                        <div class="text-2xl font-bold" id="val-noise">---</div>
                    </div>
                    <div class="bg-slate-900/80 p-2 rounded border border-green-900 flex flex-col items-center">
                        <div class="text-[10px] text-gray-400">LATITUDE</div>
                        <div class="text-lg font-bold text-blue-400" id="val-lat">---</div>
                    </div>
                    <div class="bg-slate-900/80 p-2 rounded border border-green-900 flex flex-col items-center">
                        <div class="text-[10px] text-gray-400">LONGITUDE</div>
                        <div class="text-lg font-bold text-blue-400" id="val-lng">---</div>
                    </div>
                </div>
                <div id="alert-box" class="mt-2 p-1 text-center text-xs bg-slate-800 rounded text-gray-400">SCANNING FOR
                    THREATS...</div>
            </div>

            <!-- Command Module -->
            <div class="glass-panel p-4 rounded-lg flex-grow flex flex-col justify-center">
                <div class="flex justify-between items-center mb-4 border-b border-gray-600 pb-1">
                    <h2 class="text-lg">COMMAND</h2>
                    <div id="cmd-status" class="text-xs bg-black px-2 py-0.5 rounded text-green-400">READY</div>
                </div>

                <!-- Mode Switch -->
                <div class="flex mb-4 bg-slate-900 p-1 rounded border border-green-800">
                    <button onclick="setMode('manual')" id="btn-manual"
                        class="flex-1 py-2 text-sm rounded bg-green-600 text-black font-bold hover:opacity-90 transition-colors">MANUAL</button>
                    <button onclick="setMode('auto')" id="btn-auto"
                        class="flex-1 py-2 text-sm rounded text-gray-400 hover:text-white transition-colors">AUTONOMOUS</button>
                </div>

                <!-- D-PAD -->
                <div id="dpad" class="flex flex-col items-center gap-2 max-w-[220px] mx-auto mb-2 select-none">

                    <!-- Forward -->
                    <button id="btn-fwd"
                        class="btn-control w-16 h-16 rounded-xl bg-slate-800 flex items-center justify-center text-2xl shadow-lg hover:bg-green-700 active:scale-95 transition-all">
                        <i class="fas fa-chevron-up"></i>
                    </button>

                    <!-- Middle Row -->
                    <div class="flex w-full justify-between gap-2">
                        <button id="btn-left"
                            class="btn-control w-16 h-16 rounded-xl bg-slate-800 flex items-center justify-center text-2xl shadow-lg hover:bg-green-700 active:scale-95 transition-all">
                            <i class="fas fa-chevron-left"></i>
                        </button>

                        <button id="btn-stop"
                            class="btn-control w-16 h-16 rounded-xl bg-red-900/70 border border-red-500 flex items-center justify-center text-2xl shadow-lg text-red-400 hover:bg-red-700 active:scale-95 transition-all">
                            <i class="fas fa-stop"></i>
                        </button>

                        <button id="btn-right"
                            class="btn-control w-16 h-16 rounded-xl bg-slate-800 flex items-center justify-center text-2xl shadow-lg hover:bg-green-700 active:scale-95 transition-all">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>

                    <!-- Backward -->
                    <button id="btn-bwd"
                        class="btn-control w-16 h-16 rounded-xl bg-slate-800 flex items-center justify-center text-2xl shadow-lg hover:bg-green-700 active:scale-95 transition-all">
                        <i class="fas fa-chevron-down"></i>
                    </button>

                </div>

                <div class="text-center text-[10px] text-gray-400 mb-2">HOLD ARROWS TO MOVE</div>
            </div>
        </div>
    </div>

    <!-- System Log -->
    <div class="glass-panel p-2 rounded border-t border-green-500 h-[180px] overflow-hidden flex flex-col">
        <div class="text-[10px] text-gray-500 uppercase tracking-widest border-b border-gray-800 mb-1">System Log /
            Terminal</div>
        <div id="sys-log" class="font-mono text-xs text-green-400/80 overflow-y-auto flex-grow space-y-1 p-1">
            <div>> SYSTEM INITIALIZED...</div>
            <div>> WAITING FOR UPLINK...</div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script type="module" src="script.js"></script>

</body>

</html>